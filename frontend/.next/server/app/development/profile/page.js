(()=>{var e={};e.id=254,e.ids=[254],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},62090:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var s=t(70260),a=t(28203),o=t(25155),n=t.n(o),i=t(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["development",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,55721)),"/Users/olivialewandowski/Desktop/fruition/frontend/src/app/development/profile/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"/Users/olivialewandowski/Desktop/fruition/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/olivialewandowski/Desktop/fruition/frontend/src/app/development/profile/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/development/profile/page",pathname:"/development/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},75639:(e,r,t)=>{Promise.resolve().then(t.bind(t,55721))},12431:(e,r,t)=>{Promise.resolve().then(t.bind(t,82435))},82435:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(45512),a=t(58009),o=t(13784),n=t(79334),i=t(17656),l=t(42390),d=t(66812);let u=()=>{let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!0),[o,u]=(0,a.useState)(""),c=(0,a.useRef)(null),[p,m]=(0,a.useState)(!1),[x,f]=(0,a.useState)({firstName:"",lastName:"",email:"",institution:"",role:"",department:"",researchInterests:"",major:"",graduationYear:"",bio:"",resumeURL:"",resumeName:""});(0,a.useEffect)(()=>{(async()=>{if(!d.j2.currentUser){e.push("/development/login");return}try{let e=(0,i.H9)(d.db,"users",d.j2.currentUser.uid),r=await (0,i.x7)(e);r.exists()&&f(e=>({...e,...r.data()}))}catch(e){console.error("Error fetching profile:",e),u("Failed to load profile")}finally{t(!1)}})()},[e]);let g=async e=>{if(!e.target.files||0===e.target.files.length)return;if(!d.j2.currentUser){u("You must be logged in to upload a resume. Please log in and try again.");return}let r=e.target.files[0];m(!0),u("");try{if(x.resumeURL)try{let e=(0,l.KR)(d.IG,`resumes/${d.j2.currentUser.uid}/${x.resumeName}`);await (0,l.XR)(e)}catch(e){console.error("Error deleting old resume:",e)}let e=(0,l.KR)(d.IG,`resumes/${d.j2.currentUser.uid}/${r.name}`);await (0,l.D)(e,r);let t=await (0,l.qk)(e),s={...x,resumeURL:t,resumeName:r.name};f(s),await (0,i.mZ)((0,i.H9)(d.db,"users",d.j2.currentUser.uid),{resumeURL:t,resumeName:r.name,updatedAt:new Date().toISOString()})}catch(e){console.error("Error uploading resume:",e),"storage/unauthorized"===e.code?u("Permission denied: You do not have permission to upload files."):"storage/canceled"===e.code?u("Upload cancelled: The resume upload was cancelled."):"storage/unknown"===e.code?u("Unknown error: An unknown error occurred during upload."):e.code?.includes("auth/")?u("Authentication error: Please log out and log back in to try again."):u(`Failed to upload resume: ${e.message||"Unknown error"}`)}finally{m(!1)}},b=async()=>{if(!d.j2.currentUser){u("You must be logged in to delete a resume. Please log in and try again.");return}if(!x.resumeURL){u("No resume found to delete.");return}m(!0),u("");try{let e=(0,l.KR)(d.IG,`resumes/${d.j2.currentUser.uid}/${x.resumeName}`);await (0,l.XR)(e);let r={...x,resumeURL:"",resumeName:""};f(r),await (0,i.mZ)((0,i.H9)(d.db,"users",d.j2.currentUser.uid),{resumeURL:"",resumeName:"",updatedAt:new Date().toISOString()})}catch(e){if(console.error("Error deleting resume:",e),"storage/object-not-found"===e.code)try{let e={...x,resumeURL:"",resumeName:""};f(e),await (0,i.mZ)((0,i.H9)(d.db,"users",d.j2.currentUser.uid),{resumeURL:"",resumeName:"",updatedAt:new Date().toISOString()})}catch(e){console.error("Error updating database after file not found:",e),u("Resume reference removed but database update failed.")}else"storage/unauthorized"===e.code?u("Permission denied: You do not have permission to delete this file."):e.code?.includes("auth/")?u("Authentication error: Please log out and log back in to try again."):u(`Failed to delete resume: ${e.message||"Unknown error"}`)}finally{m(!1)}},h=async r=>{r.preventDefault(),u(""),t(!0);try{if(!d.j2.currentUser)throw Error("No authenticated user");await (0,i.mZ)((0,i.H9)(d.db,"users",d.j2.currentUser.uid),{...x,updatedAt:new Date().toISOString()}),e.push("/development/dashboard")}catch(e){console.error("Error updating profile:",e),u("Failed to update profile")}finally{t(!1)}};return r?(0,s.jsx)("div",{className:"flex flex-col px-3 py-4 mt-5 ml-3.5 max-w-full text-black rounded-3xl border border-solid bg-zinc-100 border-zinc-300 shadow-[0px_4px_4px_rgba(0,0,0,0.25)]",children:"Loading..."}):(0,s.jsxs)("form",{onSubmit:h,className:"flex flex-col gap-6 px-6 py-4 mt-5 ml-3.5 max-w-full text-black",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"First Name"}),(0,s.jsx)("input",{type:"text",value:x.firstName,onChange:e=>f({...x,firstName:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Last Name"}),(0,s.jsx)("input",{type:"text",value:x.lastName,onChange:e=>f({...x,lastName:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Institution"}),(0,s.jsx)("input",{type:"text",value:x.institution,onChange:e=>f({...x,institution:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]}),"faculty"===x.role&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Department"}),(0,s.jsx)("input",{type:"text",value:x.department,onChange:e=>f({...x,department:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Research Interests"}),(0,s.jsx)("textarea",{value:x.researchInterests,onChange:e=>f({...x,researchInterests:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100",rows:3})]})]}),"student"===x.role&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Major"}),(0,s.jsx)("input",{type:"text",value:x.major,onChange:e=>f({...x,major:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Graduation Year"}),(0,s.jsx)("input",{type:"text",value:x.graduationYear,onChange:e=>f({...x,graduationYear:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Bio"}),(0,s.jsx)("textarea",{value:x.bio,onChange:e=>f({...x,bio:e.target.value}),className:"px-4 py-2 rounded-3xl border border-solid border-zinc-300 bg-zinc-100",rows:4})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Resume"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{type:"file",ref:c,onChange:g,accept:".pdf,.doc,.docx",className:"hidden"}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:x.resumeURL?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("a",{href:x.resumeURL,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-violet-800 bg-zinc-100 rounded-[30px] border border-solid border-zinc-300",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),x.resumeName]}),(0,s.jsx)("button",{type:"button",onClick:b,disabled:p,className:"px-3 py-2 text-red-600 bg-zinc-100 rounded-[30px] border border-solid border-zinc-300",children:"Delete"})]}):(0,s.jsx)("button",{type:"button",onClick:()=>c.current?.click(),disabled:p,className:"px-4 py-2 text-violet-800 bg-zinc-100 rounded-[30px] border border-solid border-zinc-300",children:p?"Uploading...":"Upload Resume"})}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Accepted formats: PDF, DOC, DOCX"})]})]}),o&&(0,s.jsx)("div",{className:"text-red-600 text-sm mt-2",children:o}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-9 py-2.5 text-black bg-zinc-100 rounded-[30px] border border-solid border-zinc-300",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:r||p,className:"px-9 py-2.5 text-white bg-violet-800 rounded-[30px]",children:r?"Saving...":"Save Changes"})]})]})},c=()=>(0,s.jsx)(o.A,{title:"Edit Profile",children:(0,s.jsx)("div",{className:"flex flex-col items-start w-full max-md:max-w-full",children:(0,s.jsx)(u,{})})})},55721:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/olivialewandowski/Desktop/fruition/frontend/src/app/development/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/olivialewandowski/Desktop/fruition/frontend/src/app/development/profile/page.tsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,831,77,531,136,111],()=>t(62090));module.exports=s})();