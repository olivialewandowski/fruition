{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/alexhsu/Desktop/fruitboy/fruition/frontend/src/config/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from 'firebase/app';\nimport { \n  getAuth, \n  GoogleAuthProvider, \n  connectAuthEmulator, \n  Auth,\n  setPersistence,\n  browserLocalPersistence\n} from 'firebase/auth';\nimport { \n  getFirestore, \n  connectFirestoreEmulator, \n  Firestore \n} from 'firebase/firestore';\nimport {\n  getStorage,\n  connectStorageEmulator,\n  FirebaseStorage\n} from 'firebase/storage';\n\n// Validate environment variables\nif (!process.env.NEXT_PUBLIC_FIREBASE_API_KEY) {\n  throw new Error('Missing Firebase API Key');\n}\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// Initialize Firebase only once\nlet app: FirebaseApp;\nlet auth: Auth;\nlet db: Firestore;\nlet storage: FirebaseStorage;\nlet googleProvider: GoogleAuthProvider;\n\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n  auth = getAuth(app);\n  setPersistence(auth, browserLocalPersistence);\n  db = getFirestore(app);\n  storage = getStorage(app);\n  \n  // Connect to emulators only in development\n  if (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n    if (process.env.NEXT_PUBLIC_USE_FIREBASE_EMULATOR === 'true') {\n      connectAuthEmulator(auth, 'http://localhost:9099', { disableWarnings: true });\n      connectFirestoreEmulator(db, 'localhost', 8080);\n      connectStorageEmulator(storage, 'localhost', 9199);\n    }\n  }\n\n  // Initialize Google Auth Provider\n  googleProvider = new GoogleAuthProvider();\n  googleProvider.addScope('https://www.googleapis.com/auth/userinfo.email');\n  googleProvider.addScope('https://www.googleapis.com/auth/userinfo.profile');\n} else {\n  app = getApps()[0];\n  auth = getAuth(app);\n  db = getFirestore(app);\n  storage = getStorage(app);\n  googleProvider = new GoogleAuthProvider();\n  googleProvider.addScope('https://www.googleapis.com/auth/userinfo.email');\n  googleProvider.addScope('https://www.googleapis.com/auth/userinfo.profile');\n}\n\nexport { auth, db, storage, googleProvider }; "],"names":[],"mappings":";;;;;;AAAA;AACA;AAQA;AAKA;AAOK;AArBL;AACA;AAQA;AAKA;AAbA;AAAA;AAAA;AAAA;;;;;AAmBA,iCAAiC;AACjC,uCAA+C;;AAE/C;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,gCAAgC;AAChC,IAAI;AACJ,IAAI;AACJ,IAAI;AACJ,IAAI;AACJ,IAAI;AAEJ,IAAI,CAAC,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,EAAE;IACrB,MAAM,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE;IACpB,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;IACf,CAAA,GAAA,gPAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,yPAAA,CAAA,0BAAuB;IAC5C,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;IAClB,UAAU,CAAA,GAAA,oKAAA,CAAA,aAAU,AAAD,EAAE;IAErB,2CAA2C;IAC3C,wCAA6E;QAC3E,wCAA8D;YAC5D,CAAA,GAAA,qPAAA,CAAA,sBAAmB,AAAD,EAAE,MAAM,yBAAyB;gBAAE,iBAAiB;YAAK;YAC3E,CAAA,GAAA,sKAAA,CAAA,2BAAwB,AAAD,EAAE,IAAI,aAAa;YAC1C,CAAA,GAAA,oKAAA,CAAA,yBAAsB,AAAD,EAAE,SAAS,aAAa;QAC/C;IACF;IAEA,kCAAkC;IAClC,iBAAiB,IAAI,oPAAA,CAAA,qBAAkB;IACvC,eAAe,QAAQ,CAAC;IACxB,eAAe,QAAQ,CAAC;AAC1B,OAAO;IACL,MAAM,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE;IAClB,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;IACf,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;IAClB,UAAU,CAAA,GAAA,oKAAA,CAAA,aAAU,AAAD,EAAE;IACrB,iBAAiB,IAAI,oPAAA,CAAA,qBAAkB;IACvC,eAAe,QAAQ,CAAC;IACxB,eAAe,QAAQ,CAAC;AAC1B"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///Users/alexhsu/Desktop/fruitboy/fruition/frontend/src/components/auth/LoginForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { signInWithEmailAndPassword, signInWithPopup } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { auth, db, googleProvider } from '@/config/firebase';\n\nconst LoginForm = () => {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Helper function to check if profile is complete and redirect accordingly\n  const checkProfileAndRedirect = async (userId: string) => {\n    try {\n      const userDoc = await getDoc(doc(db, 'users', userId));\n      \n      if (userDoc.exists()) {\n        const userData = userDoc.data();\n        // Check if essential profile fields are filled\n        if (userData.role && userData.firstName && userData.lastName && userData.institution) {\n          // Profile is complete, redirect to dashboard\n          router.push('/development/dashboard');\n        } else {\n          // Profile is incomplete, redirect to profile completion\n          router.push('/development/complete-profile');\n        }\n      } else {\n        // User document doesn't exist, redirect to profile completion\n        router.push('/development/complete-profile');\n      }\n    } catch (err) {\n      console.error('Error checking profile:', err);\n      // Default to dashboard on error\n      router.push('/development/dashboard');\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setError('');\n    setIsLoading(true);\n\n    try {\n      const result = await signInWithPopup(auth, googleProvider);\n      const user = result.user;\n      \n      if (user) {\n        const idToken = await user.getIdToken();\n        localStorage.setItem('authToken', idToken);\n        \n        // Check if profile is complete and redirect accordingly\n        await checkProfileAndRedirect(user.uid);\n      }\n    } catch (err: any) {\n      console.error('Google Sign-in error:', err);\n      \n      // Handle specific Firebase auth errors\n      if (err.code === 'auth/popup-closed-by-user') {\n        setError('Sign-in was cancelled. Please try again.');\n      } else if (err.code === 'auth/popup-blocked') {\n        setError('Pop-up was blocked by your browser. Please enable pop-ups for this site and try again.');\n      } else if (err.code === 'auth/cancelled-popup-request') {\n        setError('Sign-in process was interrupted. Please try again.');\n      } else if (err.code === 'auth/network-request-failed') {\n        setError('Network error. Please check your connection and try again.');\n      } else {\n        setError(err.message || 'Failed to sign in with Google');\n      }\n      \n      setIsLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      // Sign in with Firebase directly\n      const userCredential = await signInWithEmailAndPassword(\n        auth,\n        formData.email,\n        formData.password\n      );\n\n      const user = userCredential.user;\n      \n      if (user) {\n        // Get the ID token\n        const idToken = await user.getIdToken();\n        \n        // Store the token in localStorage\n        localStorage.setItem('authToken', idToken);\n        \n        // Check if profile is complete and redirect accordingly\n        await checkProfileAndRedirect(user.uid);\n      }\n    } catch (err: any) {\n      console.error('Login error:', err);\n      \n      // Handle specific Firebase auth errors\n      if (err.code === 'auth/invalid-email') {\n        setError('Invalid email address format.');\n      } else if (err.code === 'auth/user-disabled') {\n        setError('This account has been disabled. Please contact support.');\n      } else if (err.code === 'auth/user-not-found') {\n        setError('No account found with this email. Please sign up first.');\n      } else if (err.code === 'auth/wrong-password') {\n        setError('Incorrect password. Please try again.');\n      } else if (err.code === 'auth/too-many-requests') {\n        setError('Too many failed login attempts. Please try again later or reset your password.');\n      } else if (err.code === 'auth/network-request-failed') {\n        setError('Network error. Please check your connection and try again.');\n      } else {\n        setError('Login failed. Please check your credentials and try again.');\n      }\n      \n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Log in to your account\n        </h2>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          {/* Google Sign-in Button */}\n          <div className=\"mb-6\">\n            <button\n              type=\"button\"\n              onClick={handleGoogleSignIn}\n              disabled={isLoading}\n              className=\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500\"\n            >\n              <img \n                src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" \n                alt=\"Google\" \n                className=\"w-5 h-5 mr-2\"\n              />\n              Sign in with Google\n            </button>\n          </div>\n\n          <div className=\"relative mb-6\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <div className=\"w-full border-t border-gray-300\" />\n            </div>\n            <div className=\"relative flex justify-center text-sm\">\n              <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n            </div>\n          </div>\n\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Email\n              </label>\n              <input\n                type=\"email\"\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 px-3 py-2\"\n                value={formData.email}\n                onChange={(e) => setFormData({...formData, email: e.target.value})}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <input\n                type=\"password\"\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 px-3 py-2\"\n                value={formData.password}\n                onChange={(e) => setFormData({...formData, password: e.target.value})}\n              />\n            </div>\n\n            {error && (\n              <div className=\"text-red-600 text-sm\">{error}</div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className={`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-950 hover:bg-purple-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 ${\n                isLoading ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {isLoading ? 'Signing in...' : 'Sign in'}\n            </button>\n          </form>\n          \n          {/* Sign up link */}\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Don't have an account?{' '}\n              <Link href=\"/development/signup\" className=\"font-medium text-purple-600 hover:text-purple-500\">\n                Sign up\n              </Link>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginForm;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///Users/alexhsu/Desktop/fruitboy/fruition/frontend/src/app/development/login/page.tsx"],"sourcesContent":["'use client';\n\nimport LoginForm from '@/components/auth/LoginForm';\n\nexport default function DevLoginPage() {\n  return (\n    <div className=\"dev-environment\">\n      <div className=\"bg-yellow-100 p-4 text-yellow-800 text-center\">\n        Development Environment\n      </div>\n      <LoginForm />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BAAgD;;;;;;0BAG/D,6LAAC,0IAAA,CAAA,UAAS;;;;;;;;;;;AAGhB;KATwB"}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}